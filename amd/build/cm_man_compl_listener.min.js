define("local_dynprogressbar/cm_man_compl_listener",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * Theme LearnR - JS code listener
   *
   * @module     local_dynprogressbar/cm_man_compl_listener
   * @copyright  2023 Tina John <tina.john@th-luebeck.de>
   * @copyright  Institut fuer interaktive Systeme der TH LÃ¼beck
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
let registered=!1;_exports.init=()=>{if(registered)return;registered=!0;let send=XMLHttpRequest.prototype.send;function readAJAXrequestsend(payload){const plo=JSON.parse(payload);if(plo[0].methodname.match("(.*)core_completion_update_activity_completion_status_manually(.*)")){console.log("got XHR Data for core_completion_update_activity_completion_status_manually",plo[0].methodname);var cmcompletedEvent=new CustomEvent("cmcompleted",{detail:{message:"core_completion_update_activity_completion_status_manually"}});document.dispatchEvent(cmcompletedEvent)}payload=""}XMLHttpRequest.prototype.send=function(){console.log("dynprogressbar---XMLHttpRequest send-----");var payload=arguments[0];if(null===payload)send.apply(this,arguments);else{console.log("dynprogressbar---the payload send-----"+payload);var isValidJSON=!0;try{JSON.parse(payload)}catch{isValidJSON=!1}isValidJSON&&this.addEventListener("load",(function removeMe(){readAJAXrequestsend(payload),this.removeEventListener("load",removeMe)}),!1),send.apply(this,arguments)}}}}));

//# sourceMappingURL=cm_man_compl_listener.min.js.map